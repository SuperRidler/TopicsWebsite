<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <!--<title>Computing in Surgery</title>-->
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="description" content="Comouting in Surgery, Image Guidance." />
        <link rel="stylesheet" href="css/style_vertical.css" type="text/css" media="screen"/>
		<link rel="stylesheet" href="css/button.css" type="text/css"/>
    </head>
    <style>
        <!--
			a{
            color:#fff;
			font-family:Georgia;
			font-style:italic;
            text-decoration:none;
			}
			
        a:hover{
            text-decoration:none;
			cursor: pointer;
			}
			
        span.reference{
            position:fixed;
            left:10px;
            bottom:10px;
            font-size:13px;
            font-weight:bold;
			}
			
        span.reference a{
            color:#fff;
            text-shadow:1px 1px 1px #000;
            padding-right:20px;
			}
			
        span.reference a:hover{
            color:#ddd;
            text-decoration:none;
			}
		-->

    </style>
	<style type ="text/css">
		ts {line-height: 100%; font-size: 22px}
	</style>
    <body>
		<div id="top-floating-bar">
            <div id="bar-text"><ul class="nav">
				&nbsp;&nbsp;Computing in Surgery &nbsp;&nbsp;&nbsp;   
				<a onClick="goToPage(1);">Introduction</a>&nbsp;/&nbsp; 
                <a onClick="goToPage(2);">History</a>&nbsp;/&nbsp; 
				<a onClick="goToPage(3);">Image Registration</a>&nbsp;/&nbsp; 
                <a onClick="goToPage(17);">Augmented Reality</a>&nbsp;/&nbsp;
				<a onClick="goToPage(20);">Camera Calibration</a>
            </div></ul>
        </div>
		<div id="next-button">
			<a onClick="nextPage();" class="button">Next</a>
		</div>
		<div id="prev-button">
			<a onClick="prevPage();" class="button">Prev</a>
		</div>
        <div class="section black" id="section1">
            <h2>Computing in Surgery - Image Guidance</h2>
            <p>
                Write a nice intro to this topic <br />
				...or something.
            </p>
        </div>
        <div class="section white" id="section2">
            <h2>History</h2>
            <p>
                Pretty obvious we write some history.
            </p>
        </div>
		<!-- Image Registration  Starts Page 3 -->
		<div class="section black" id="section3">
            <h2>Image Registration</h2>
			<table width="90%" border="0" height="400"
				   style="position:absolute; left:47px">
				<tr>
					<td style="width:50%;">
						Comparing two images that need to be brought into the same spatial coordinates. <br />
						The process of mapping spatial coordinates of one image onto another. <br />
					</td>
					<td style="width:50%;text-align:center;">
						<img src="mimages/ir1.gif" alt="Image Registration Image"/>
					</td>
				</tr>
				<tr>
					<td style="width:50%;text-align:center;">
						<img src="mimages/ir2.jpg" alt="Image Registration Image"/>
					</td>
					<td style="width:50%;vertical-align:top;">
						Two types of registration. <br />
						&nbsp;&nbsp;- Rigid registration               : Image translated, rotated or scaled. <br />
						&nbsp;&nbsp;- Non-rigid registration (Elastic) : Local-level deformation. E.g Regression or growth of disease.
					</td>
				</tr>
			</table>
        </div>
		<div class="section white" id="section4">
            <h2>Image Registration</h2>
            <table width="100%" border="0"
				   style="position:absolute; left:47px">
				<tr>
					<td style="width:50%;font-size:30px;">
						<h3> Rigid Registration</h3> <br />
						Intensity Based Rigid Registration <br />
						- Iteratively optimises 6 rigid-body parameters describing the orientation of the 3D data-set using a similarity measure. <br />
						Landmark Based Registration <br />
						- Selection of landmarks/feature points and matching them on the images helps to correctly register them. <br />
						Hybrid Registration <br />
						- Tries to incorporate the the benefits of both landmark based registration and intensity based rigid registration. <br />
					</td>
					<td style="width:50%;text-align:center">
						<img src="mimages/ir3.gif" alt="Image Registration Image"/>
					</td>
				</tr>
			</table>
        </div>
		<div class="section black" id="section5">
            <h2>Image Registration</h2>
			<table width="90%" border="0">
				<tr>
					<td style="width:50%;text-align:center">
						<h3>Non-Rigid Registration</h3>
						<img src="mimages/ir3.gif" alt="Image Registration Image"/>
					</td>
					<td style="width:50%;">
						<br />Must use features in the image that are invariant to translation and rotation. 
						These feature points can then register the images using a method called landmark based registration method. <br />
						Average 4-Step Method: <br />
						1. Feature Detection <br />
						2. Feature Matching <br />
						3. Transform Model Estimation <br />
						4. Image Re-Sampling and Transformation <br />
					</td>
				</tr>
			</table>
        </div>
		<div class="section white" id="section6">
			<h2>Image Registration</h2>
			<table width="100%" border="0">
				<tr>
					<td style="width:50%;text-align:center;">
						<img src="mimages/ir4.jpg" alt="Image Registration Image"/>
					</td>
					<td style="width:50%;">
						<h3>Feature Detection</h3> <br />
						Distinctive objects are manually or more preferably automatically detected in the images and can be represented by their point representatives. 
						These points are called control points.<br /> <br />
					</td>
				</tr>
			</table>
        </div>
        <div class="section black" id="section7">
            <h2>Image Registration</h2>
			<table width="100%" border="0"
				   style="position:absolute; left:47px">
				<tr>
					<td style="width:50%;">
						<h3>Feature Detection</h3> <br />
						In the past objects were manually selected by an expert. Two main approaches to automate this task.<br /> <br />
						Area-Based Methods - More emphasis on the feature matching step than on their detection. First step essentially omitted. <br />
						Feature-Based Methods - Significant regions, lines or points are understood as features here. 
					</td>
					<td style="width:50%;">
						<img src="mimages/ir5.jpg" alt="Image Registration Image"/>
					</td>
				</tr>
			</table>
        </div>
		<div class="section white" id="section8">
			 <h2>Image Registration</h2>
			<table width="100%" border="0"
				   style="position:absolute; left:47px">
				<tr>
					<td style="width:50%;font-size:30px;">
						<h3>Feature Based Methods</h3> <br />
						Features should be spread all over the image and be efficiently detectable in both images. 
						Expected to be stable and stay at fixed positions. 
						Comparability of feature sets is assured by the feature detector. 
						The number of common elements in the detected sets of features should be sufficiently high. 
						Feature-Based Methods do not work directly with image intensity values but represent information on a higher level. 
						This makes the method suitable for different kinds of imaging such as medical imaging.
					</td>
					<td style="width:50%;">
						<img src="mimages/ir6.png" alt="Image Registration Image"/>
					</td>
				</tr>
			</table>
        </div>
		<div class="section black" id="section9">
			<h2>Image Registration</h2>
			<table width="100%" border="0">
				<tr>
					<td style="width:50%;text-align:center;">
						<img src="mimages/ir7.png" alt="Image Registration Image"/>
					</td>
					<td style="width:50%;">
						<h3>Types of Features</h3> <br />
						Region Features : High contrast closed-boundary regions of an appropriate size. <br /> <br />
						Line Features : Representations of general line segments. (Elongated anatomic structures in MI) <br /> <br />
						Point Features : The most distinctive points with respect to a specified measure of similarity. <br /> <br />
					</td>
				</tr>
			</table>
        </div>
		<div class="section white" id="section10">
			<h2>Image Registration</h2>
			<table width="100%" border="0"
				   style="position:absolute; left:47px">
				<tr>
					<td style="width:50%;vertical-align:top;">
						<h3>Types of Features</h3><br />
						Region Features detected by means of segmentation methods. 
						Dependent on the accuracy of the segmentation method. 
						Sub-pixel accuracy or registration can be achieved with iterative methods.
						Line Features expressed by pairs of line ends or middle points.
						Line detection can be done by standard edge detection methods like Canny detector or a detector based on the Laplacian of Gaussian. <br />
					</td>
					<td style="width:50%;text-align:center">
						<img src="mimages/ir7.png" alt="Image Registration Image"/>
					</td>
				</tr>
			</table>
        </div>
		<div class="section black" id="section11">
			<h2>Image Registration</h2>
			<table width="90%" border="0">
				<tr>
					<td style="width:50%;text-align:center">
						<img src="mimages/ir8.jpg" alt="Image Registration Image"/>
					</td>
					<td style="width:50%;">
					<h3>Types of Features</h3> <br />
					Point Features detected in most cases by following the definition of a point as a line intersection, centroid of closed-boundary region or local maxima of the wavelet transform. 
					Defining corners is hard. Corner detection methods include SUSAN detector.
					Point Features include corners.  <br />
					Some registration techniques are using both area and feature based approaches.
					</td>
				</tr>
			</table>
        </div>
		<div class="section white" id="section12">
			<h2>Image Registration</h2>
			<table width="100%" border="0">
				<tr>
					<td style="width:50%;text-align:center;">
						<h3>Feature Matching</h3> <br />
						Matched by means of image intensity values in their close neighbourhoods, the feature spatial distribution, or the feature symbolic description.
					</td>
				</tr>
				<tr>
					<td style="text-align:center;">
						<br />
						<img src="mimages/ir9.jpg" alt="Image Registration Image"/>
					</td>
				</tr>
			</table>
        </div>
		<div class="section black" id="section13">
			<h2>Image Registration</h2>
			<table width="100%" border="0">
				<tr>
					<td style="width:50%;text-align:center;">
						<br />
						<img src="mimages/ir10.jpg" alt="Image Registration Image"/>
					</td>
					<td style="width:50%;">
					<h3>Feature Matching</h3> <br />
					Area-Based Methods - Suits the registration of images which locally differ only by a translation. <br /> <br />
					Any images deformed by more complex transformations will not register properly. <br /><br />
					Another disadvantage is that there is a high chance that any two non-detailed areas will be matched incorrectly. 
					</td>
				</tr>
			</table>
        </div>
		<div class="section white" id="section14">
			<h2>Image Registration</h2>
			<table width="100%" border="0"
				   style="position:absolute; left:47px">
				<tr>
					<td style="width:50%;">
						<h3>Feature Matching</h3> <br />
						<br />
						Correlation-Like Methods - Classic area-based methods including cross-correlation try to matching image intensities without structural analysis. <br /> <br />
						This makes it very sensitive to intensity changes such as noise.
					</td>
					<td style="width:50%;text-align:center;">
						<br />
						<img src="mimages/ir11.png" alt="Image Registration Image"/>
					</td>
				</tr>
			</table>
        </div>
		<div class="section black" id="section15">
			<h2>Image Registration</h2>
			<table width="90%" border="0">
				<tr>
					<td style="width:50%;text-align:center;">
						<br />
						<img src="mimages/ir12.jpg" alt="Image Registration Image"/>
					</td>
					<td style="width:50%;font-size:30px;">
						<h3>Feature Matching</h3> <br />
						Fourier Methods - Preferred when there is varying conditions (varying light intensity) or the images are corrupted with noise. 
						Phase correlation method is based on the Fourier Shift Theorem. <br />
						This computes the cross-power spectrum of the images and looks for the location of the peak in its inverse. <br />
						This method has robustness against noise and illumination levels. <br />
						Time savings are more significant as the image size increases. 
						In case of varying image scales, combine polar-log mapping and phase correlation.
					</td>
				</tr>
			</table>
        </div>
		<div class="section white" id="section16">
			<h2>Image Registration</h2>
			<table width="90%" border="0"
				   style="position:absolute; left:47px">
				<tr>
					<td style="width:50%;">
						<h3>Feature Matching</h3>
						<ts>Mutual Information Methods - Leading technique in multi modal registration. Required for medical imaging. 
						Comparison of anatomical and functional images of the patients body can lead to a a diagnosis that would be impossible to gain otherwise. 
						Remote sensing allows for the exploitation of other sensor types too.</ts>
					</td>
					<td style="width:50%;text-align:center;">
						<img src="mimages/ir13.jpg" alt="Image Registration Image"/>
					</td>
				</tr>
				<tr>
					<td style="width:50%;text-align:center;">
						<img src="mimages/ir14.png" alt="Image Registration Image"/>
					</td>
					<td style="width:50%;font-size:22px;">
						Originates in information theory, measures statistical dependency between two data sets and is particularly suitable for different modalities. <br />
						This method is based upon the maximum of MI. Can be sped up by using the coarse-to-fine resolution strategy (the pyramidal approach). <br />
						Can be used to match MRI images and 3D object model matching to the real scene. Gradient Descent Optimisation. 
					</td>
				</tr>
			</table>
        </div>
		<div class="section black" id="section17">
			<h2>Augmented Reality</h2>
			
			<table width="90%"
				   style="border:0px solid white;
						  position:absolute; left:47px">
			<tr>
				<td>
					With the increased use of robotic assisted, minimally invasive, surgery this has become the ideal environdment for such things as Augmented Reality. <br />
					Traditional AR methods, however, such as overlaid AR, have suffered from a lack of depth perception. <br />
					Even when the objects in question are rendered at the correct depth, the brain perceives the virtual images to be floating, thus hampering the process.
				</td>
				
				<td>
					<img src="augimages/gr4-manualnavigation.jpg" alt="Manual Navigation Image"/>
				</td>
			</tr>
			</table>
        </div>
		<div class="section white" id="section18">
			<h2>Augmented Reality</h2>			
			<table width="100%"
				   style="border:0px solid white;
						  position:absolute; left:47px">
			<tr>
				<td>
					To perceive the image as embedded the brain expects some form of occlusion/obstruction.<br />
					As such AR allowed the surgeon to view the medical imagery from a natural viewpoint <br />
					<br />
					&nbsp;&nbsp;&nbsp;&nbsp;<b>Positives</b>;<br />
					 ~ The effectiveness and clinical benefit of AR has been widely recognised
					</td>
			</tr>
			<tr></tr><tr></tr><tr></tr>
			<tr>
				<td>
				&nbsp;&nbsp;&nbsp;&nbsp;<b>Negatives</b>;<br />
					 ~ The application of the technique to cardiothoracic<br /> 
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or gastrointestinal surgery remains limited<br />
					 ~ Tissue deformation can present significant challenge to AR displays<br />
				</td>
			</tr>
			</table>
        </div>
		<div class="section black" id="section19">
			<h2>Augmented Reality</h2>
			<table width="90%"
				   style="border:0px solid white;
						  position:absolute; left:47px">
			<tr>
				<td>
				Techniques such as P-Q Space Rendering provide see-through vision of embedded virtual objects.
				These maintain the projected anatomical detail of the eposed surface whilst aiding the surgery.
				</td>
			</tr>
			</table>
        </div>
		<div class="section white" id="section20">
			<h2>Augmented Reality</h2>
			<table width="90%"
				   style="border:0px solid white;
						  position:absolute; left:47px">
			<tr>
				<td>
				The idea of P-Q Space Rendering is to render the exposed surface as a translucent layer whilst ensuring that sufficient detail remains to aid both navigation and depth cue-ing. <br />
				The surface geometry is based on p-q space representation. 'p' and 'q' represent the slope of the surface along the x and y axes, respectively.
				</td>
				<td width="50%"></td>
			</tr>
			</table>
        </div>
		<div class="section black" id="section21">
			<h2>Augmented Reality</h2>
			<table width="90%"
				   style="border:0px solid white;
						  position:absolute; left:47px">
			<tr>
				<td style="font-size:28px" colspan="2">
				During broncoscopic and endoscopic procedures, P-Q Space is used heavily alongside the Shape from Shading Algorithm. 
				This is a classical problem within the field of computer vision. 
				It addresses the issue of extracting both surface and relative depth information from a single image.
				</td>
			</tr>
			<tr>
				<td style="font-size:20px" colspan="2"><br /></td>
			</tr>
			<tr>
				<td style="font-size:20px" colspan="2">
					Below is an example of shape from shading used to pull the depth information of the left image.<br />
					The results have been mathematically protrayed as a graph.
				</td>
			</tr>
			<tr>
				<td colspan="2">
					<img src="augimages/pradosFaceAndReconstruction.jpg" alt="Shape From Shading"/>
				</td>
			</tr>
			<tr>
			<td style="width:25%"></td>
				<td style = "font-size:10px">
					image curtosy of; http://hal.inria.fr/inria-00394230/en/
				</td>
			</tr>
			</table>
        </div>
		<div class = "section white" id = "section22">
			<h2>Augmented Reality</h2>
			<table width="90%"
				   style = "border:0px solid white;
						  position:absolute; left:47px">
			<tr>
				<td>
					<img src = "augimages/equation.jpg" alt = "equation"/>
				</td>				
			</tr>
			<tr>
				<td style = "font-size:28px">
					<b>E(x,y)</b> represents the image irradiance, the amount of light falling on a surface<br />
					<b>L</b> is reflected radiance of the light-source, the amount of light radiated from a surface<br />
					<b>d</b> is the lens diametre<br />
					<b>f</b> is the focal length<br />
					<b>α</b> is the angle between the optical axis and the light ray going through the centre of the observed angle
				</td>
			</tr>
			</table>
        </div>
		<div class="section black" id="section23">
			<h2>Augmented Reality</h2>
			<table width="90%"
				   style="border:0px solid white;
						  position:absolute; left:47px">
			<tr>
				<td style="font-size: 25px">
					Given the previous equation, α is assumed negliable. However when using endoscopes this cannot be assumed as the camera and light source are assumed to be near the surface.
					As such, the image irradiance in this situation can be described by a constant of the camera parametres, multipled by the surface albedo, the angle between the incident ray and surface normal and a monotomically decreasing function of the surface point and light source.
				</td>
				<td width="50%"></td>
			</tr>
			<tr>
				<td style="font-size: 25px">
					<br />
					When using p-q space rendering the surfaces normals for each pixel are extracted (using linear local shape-from-shading algorithms derived from the necessary camera and lighting constraints). 
					Given a 3D tomographic model, the p-q components are then extracted.
				</td>
				<td width="50%"></td>
			</tr>
			</table>
        </div>
		<div class="section white" id="section24">
			<h2>Augmented Reality</h2>
			<table width="90%"
				   style="border:0px solid white;
						  position:absolute; left:47px">
			<tr>
				<td>
					In P-Q Space representation, the angle between the normal vectors both before and after rigid body registration will remain the same for every surface point.
					This means that local deformation is identified where the angle diverts from the overall mean of the 3D model.
				</td>
				<td width="50%"></td>
			</tr>
			</table>
        </div>
		<div class="section black" id="section25">
			<h2>Testing Purposes - Page 11</h2>
			<p>
				For testing.
			</p>
        </div>
		<div class="section white" id="section26">
			<h2>Testing Purposes - Page 11</h2>
			<p>
				For testing.
			</p>
        </div>

        <!-- The JavaScript -->
        <!--<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>	-->
		<script type="text/javascript" src="js/jquery.min.js"></script>		
        <script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
        <script type="text/javascript">
		page=1;
		lastPage=24;
		mydiv = document.getElementById('prev-button');
		mydiv.style.visibility = "hidden";
		browserThing();
		onipad = false;
			function goToPage(toPage){
				page = toPage;
				$('html, body').stop().animate({
						scrollTop: $("#section"+page).offset().top}, 1500,'easeInOutExpo');
					if(page==1){
					mydiv = document.getElementById('prev-button');
					mydiv.style.visibility = "hidden";
					mydiv = document.getElementById('next-button');
					mydiv.style.visibility = "visible";
					}else
					if(page==lastPage){
						mydiv = document.getElementById('prev-button');
						mydiv.style.visibility = "visible";
						mydiv = document.getElementById('next-button');
						mydiv.style.visibility = "hidden";
					}else{
						mydiv = document.getElementById('prev-button');
						mydiv.style.visibility = "visible";
						mydiv = document.getElementById('next-button');
						mydiv.style.visibility = "visible";
					}
			}
			function nextPage(){
				if(page!=lastPage){
					page++;
					$('html, body').stop().animate({
						scrollTop: $("#section"+page).offset().top
                    }, 1500,'easeInOutExpo');
				}
				if(page==2){
					mydiv = document.getElementById('prev-button');
					mydiv.style.visibility = "visible"; 
				}else 
				if(page==lastPage){
					mydiv = document.getElementById('next-button');
					mydiv.style.visibility = "hidden";
				}
			}
			function prevPage(){
				if(page!=1){
					page--;
					$('html, body').stop().animate({
						scrollTop: $("#section"+page).offset().top
                    }, 1500,'easeInOutExpo');
				}
				if(page==1){
					mydiv = document.getElementById('prev-button');
					mydiv.style.visibility = "hidden";
				}
				if(page!=lastPage){
					mydiv = document.getElementById('next-button');
					mydiv.style.visibility = "visible";
				}
			}
			function browserThing(){
				if(navigator.platform=='iPad'){
					alert('Sorry! - Not ready for iPad.');
					/*document.getElementById('next-button').style.display='none';
					document.getElementById('prev-button').style.display='none';
					onipad = true;
					var introNext = document.getElementById('intro-next-button');
					introNext.style.position="relative";
					introNext.style.left="825px";
					introNext.style.top="275px";
					introNext.style.visibility="visible";*/
				}
			}
        </script>
    </body>
</html>